IF
  See("Viconia")  // Viconia
  !Dead("viconia")  // viconia
THEN
  RESPONSE #100
    EquipMostDamagingMelee()
    AttackReevaluate(LastSeenBy(Myself),30)
END

IF
  AttackedBy([ANYONE],DEFAULT)
THEN
  RESPONSE #100
    Attack(LastAttackerOf(Myself))
END

IF
  OR(2)
    Dead("Viconia")  // Viconia
    !Detect("Viconia")  // Viconia
  CombatCounter(0)
  !Allegiance(Myself,ENEMY)
  Global("ViconiaKeldornFight","GLOBAL",1)
  See([PC])
THEN
  RESPONSE #100
    SetGlobal("ViconiaKeldornFight","GLOBAL",2)
    StartDialogNoSet([PC])
END

IF
  OR(2)
    Dead("Viconia")  // Viconia
    !Detect("Viconia")  // Viconia
  CombatCounter(0)
  Global("ViconiaKeldornFight","GLOBAL",1)
  !See([PC])
THEN
  RESPONSE #100
    EscapeArea()
END

IF
  Detect("Viconia")  // Viconia
  !Dead("Viconia")  // Viconia
  !See("Viconia")  // Viconia
  Range("Viconia",40)  // Viconia
  HaveSpell(INQUIS_TRUE_SIGHT)
THEN
  RESPONSE #100
    Spell(Myself,INQUIS_TRUE_SIGHT)
    Continue()
END

IF
  See("Viconia")  // Viconia
  !Dead("Viconia")  // Viconia
  OR(6)
    StateCheck(LastSeenBy(Myself),STATE_HASTED)
    StateCheck(LastSeenBy(Myself),STATE_BLESS)
    StateCheck(LastSeenBy(Myself),STATE_CHANT)
    StateCheck(LastSeenBy(Myself),STATE_MIRRORIMAGE)
    StateCheck(LastSeenBy(Myself),STATE_BLUR)
    HasImmunityEffects(LastSeenBy(Myself))
  HaveSpell(INQUIS_DISPEL_MAGIC)
THEN
  RESPONSE #100
    Spell(LastSeenBy(Myself),INQUIS_DISPEL_MAGIC)
    Continue()
END

