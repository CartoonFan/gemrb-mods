IF
  Global("DruidStronghold","GLOBAL",1)
  Global("DruidQuest1","GLOBAL",0)
  PartyRested()
THEN
    CreateCreatureObjectEffect("Drshsp01","SPFLESHS",Player1)
    ActionOverride("Drshsp01",Wait(2))
END

IF
  PartyRested()
  GlobalTimerExpired("DruidQuest2Begin","GLOBAL")
  Global("DruidStronghold","GLOBAL",1)
  Global("DruidQuest2","GLOBAL",0)
THEN
    CreateCreatureObjectEffect("Drshsp01","SPFLESHS",Player1)
    ActionOverride("Drshsp01",Wait(1))
END

IF
  Global("DruidFight","AR1901",1)
THEN
    SetGlobal("InCut","AR1901",1)
    SetGlobal("DruidFight","AR1901",10)
    SetGlobal("CerndWentHunting","GLOBAL",1)
    SetGlobal("CerndChallenge","GLOBAL",1)
    FadeToColor([20.0],0)
    Wait(2)
    MoveViewPoint([575.658],INSTANT)
    ActionOverride(Player1,RestorePartyLocations())
    FakeEffectExpiryCheck(Player1,150000)
    FakeEffectExpiryCheck(Player2,150000)
    FakeEffectExpiryCheck(Player3,150000)
    FakeEffectExpiryCheck(Player4,150000)
    FakeEffectExpiryCheck(Player5,150000)
    FakeEffectExpiryCheck(Player6,150000)
    FakeEffectExpiryCheck("Cernd",150000)
    MoveGlobal("AR1901","Cernd",[616.541])
    FadeFromColor([20.0],0)
    ActionOverride("observe",DestroySelf())
    ActionOverride("cechalle",Wait(2))
    SetGlobal("InCut","AR1901",2)
    SetGlobal("CerndSpawn","GLOBAL",2)
    ActionOverride("cernd",ChangeAIScript("CERND",OVERRIDE))
    ActionOverride("cernd",PickUpItem("NPSTAF"))
    ActionOverride("cernd",PickUpItem("NPCLCK"))
    Wait(2)
    ActionOverride("cernd",StartDialogNoSet(Player1))
    SetGlobal("SpeakCerndSpeak","GLOBAL",1)
END

IF
  GlobalGT("DruidFight","AR1901",0)
  GlobalLT("DruidFight","AR1901",10)
  OR(2)
    GlobalGT("CerndWentHunting","GLOBAL",0)
    GlobalGT("HelpCernd","GLOBAL",0)
THEN
    SetGlobal("InCut","AR1901",1)
    SetGlobal("DruidFight","AR1901",10)
    FadeToColor([20.0],0)
    Wait(2)
    MoveViewPoint([575.658],INSTANT)
    ActionOverride(Player1,RestorePartyLocations())
    FakeEffectExpiryCheck(Player1,150000)
    FakeEffectExpiryCheck(Player2,150000)
    FakeEffectExpiryCheck(Player3,150000)
    FakeEffectExpiryCheck(Player4,150000)
    FakeEffectExpiryCheck(Player5,150000)
    FakeEffectExpiryCheck(Player6,150000)
    FadeFromColor([20.0],0)
    ActionOverride("observe",DestroySelf())
    ActionOverride("cechalle",Wait(2))
    SetGlobal("InCut","AR1901",2)
    MoveGlobal("AR1901","Cernd",[498.653])
    SetGlobal("CerndSpawn","GLOBAL",2)
    ActionOverride("cernd",StartDialogNoSet(Player1))
END

IF
  GlobalGT("DruidFight","AR1901",0)
  GlobalLT("DruidFight","AR1901",10)
  OR(3)
    Global("CerndWentHunting","GLOBAL",0)
    Global("HelpCernd","GLOBAL",0)
THEN
    SetGlobal("InCut","AR1901",1)
    SetGlobal("DruidFight","AR1901",10)
    FadeToColor([20.0],0)
    Wait(2)
    MoveViewPoint([575.658],INSTANT)
    ActionOverride(Player1,RestorePartyLocations())
    FakeEffectExpiryCheck(Player1,150000)
    FakeEffectExpiryCheck(Player2,150000)
    FakeEffectExpiryCheck(Player3,150000)
    FakeEffectExpiryCheck(Player4,150000)
    FakeEffectExpiryCheck(Player5,150000)
    FakeEffectExpiryCheck(Player6,150000)
    FadeFromColor([20.0],0)
    ActionOverride("observe",DestroySelf())
    ActionOverride("cechalle",Wait(2))
    SetGlobal("InCut","AR1901",2)
    ActionOverride("cechalle",StartDialogNoSet(Player1))
END

IF
  Global("DruidFight","AR1901",1)
THEN
    SetGlobal("DruidFight","AR1901",11)
    FadeToColor([20.0],0)
    Wait(2)
    MoveViewPoint([575.658],INSTANT)
    ActionOverride("cefald01",DestroySelf())
    ActionOverride("cefald02",DestroySelf())
    ActionOverride("observe",DestroySelf())
    ActionOverride(Player1,JumpToPoint([520.673]))
    FadeFromColor([20.0],0)
END

IF
  Global("DruidFight","AR1901",2)
THEN
    SetGlobal("DruidFight","AR1901",11)
    FadeToColor([20.0],0)
    Wait(2)
    MoveViewPoint([575.658],INSTANT)
    ActionOverride("cefald01",DestroySelf())
    ActionOverride("cefald02",DestroySelf())
    ActionOverride("observe",DestroySelf())
    ActionOverride(Player1,JumpToPoint([520.673]))
    FadeFromColor([20.0],0)
END

IF
  Global("DruidFight","AR1901",4)
  InPartyAllowDead(Player2)
  !InParty(Player2)
THEN
    SetGlobal("DruidFight","AR1901",11)
    FadeToColor([20.0],0)
    Wait(2)
    MoveViewPoint([575.658],INSTANT)
    ActionOverride("cefald01",DestroySelf())
    ActionOverride("cefald02",DestroySelf())
    ActionOverride("observe",DestroySelf())
    ActionOverride(Player1,JumpToPoint([520.673]))
    FadeFromColor([20.0],0)
END

IF
  Global("DruidFight","AR1901",5)
  InPartyAllowDead(Player3)
  !InParty(Player3)
THEN
    SetGlobal("DruidFight","AR1901",11)
    FadeToColor([20.0],0)
    Wait(2)
    MoveViewPoint([575.658],INSTANT)
    ActionOverride("cefald01",DestroySelf())
    ActionOverride("cefald02",DestroySelf())
    ActionOverride("observe",DestroySelf())
    ActionOverride(Player1,JumpToPoint([520.673]))
    FadeFromColor([20.0],0)
END

IF
  Global("DruidFight","AR1901",6)
  InPartyAllowDead(Player4)
  !InParty(Player4)
THEN
    SetGlobal("DruidFight","AR1901",11)
    FadeToColor([20.0],0)
    Wait(2)
    MoveViewPoint([575.658],INSTANT)
    ActionOverride("cefald01",DestroySelf())
    ActionOverride("cefald02",DestroySelf())
    ActionOverride("observe",DestroySelf())
    ActionOverride(Player1,JumpToPoint([520.673]))
    FadeFromColor([20.0],0)
END

IF
  Global("DruidFight","AR1901",7)
  InPartyAllowDead(Player5)
  !InParty(Player5)
THEN
    SetGlobal("DruidFight","AR1901",11)
    FadeToColor([20.0],0)
    Wait(2)
    MoveViewPoint([575.658],INSTANT)
    ActionOverride("cefald01",DestroySelf())
    ActionOverride("cefald02",DestroySelf())
    ActionOverride("observe",DestroySelf())
    ActionOverride(Player1,JumpToPoint([520.673]))
    FadeFromColor([20.0],0)
END

IF
  Global("DruidFight","AR1901",8)
  InPartyAllowDead(Player6)
  !InParty(Player6)
THEN
    SetGlobal("DruidFight","AR1901",11)
    FadeToColor([20.0],0)
    Wait(2)
    MoveViewPoint([575.658],INSTANT)
    ActionOverride("cefald01",DestroySelf())
    ActionOverride("cefald02",DestroySelf())
    ActionOverride("observe",DestroySelf())
    ActionOverride(Player1,JumpToPoint([520.673]))
    FadeFromColor([20.0],0)
END

IF
  OR(2)
    GlobalGT("CerndWentHunting","GLOBAL",0)
    GlobalGT("HelpCernd","GLOBAL",0)
  GlobalGT("DruidFight","AR1901",9)
  Global("CerndSpawn","GLOBAL",0)
  Global("InCut","AR1901",2)
THEN
    MoveGlobal("AR1901","Cernd",[498.653])
    SetGlobal("CerndSpawn","GLOBAL",1)
END

IF
  Global("trevil01Job","GLOBAL",1)
  Global("trevil02Spawn","GLOBAL",0)
THEN
    SetGlobal("trevil02Spawn","GLOBAL",1)
    TriggerActivation("THESOURCE",TRUE)
END

IF
  Global("DruidFight","AR1901",11)
  Global("trevil01Job","GLOBAL",1)
  Global("SourceReactivate","AR1901",1)
THEN
    TriggerActivation("THESOURCE",TRUE)
    SetGlobal("SourceReactivate","AR1901",0)
END

IF
  Global("CerndBaby","GLOBAL",1)
  Global("CerndSpawnAfterBabyDelivered","GLOBAL",0)
  GlobalTimerExpired("CerndBabyDone","GLOBAL")
THEN
    SetGlobal("CerndSpawnAfterBabyDelivered","GLOBAL",1)
    MoveGlobal("AR1901","Cernd",[616.541])
END

IF
  Global("CerndWentHunting","GLOBAL",1)
  Global("GrovePoisoned","GLOBAL",0)
  Global("CerndSpawn","GLOBAL",0)
  Global("MasterTalked","AR1901",1)
THEN
    SetGlobal("CerndSpawn","GLOBAL",1)
    MoveGlobalObjectOffScreen("Cernd",Player1)
END

IF
  Global("GreatDruidFight","AR1901",1)
THEN
    SetGlobal("GreatDruidFight","AR1901",2)
    SetGlobal("GreatDruid","GLOBAL",1)
    FadeToColor([20.0],0)
    Wait(2)
    MoveViewPoint([575.658],INSTANT)
    FakeEffectExpiryCheck(Player1,150000)
    FakeEffectExpiryCheck(Player2,150000)
    FakeEffectExpiryCheck(Player3,150000)
    FakeEffectExpiryCheck(Player4,150000)
    FakeEffectExpiryCheck(Player5,150000)
    FakeEffectExpiryCheck(Player6,150000)
    ActionOverride(Player1,RestorePartyLocations())
    FadeFromColor([20.0],0)
    ActionOverride("cechalle",Wait(2))
    ActionOverride("cechalle",StartDialogNoSet(Player1))
END

IF
  Global("GrovePoisoned","GLOBAL",1)
  Global("trevil03Spawn","AR1901",0)
THEN
    SetGlobal("trevil03Spawn","AR1901",1)
    CreateCreatureObjectEffect("TREVIL03","SPDIMNDR",Player1)
    ActionOverride("trevil03",Wait(2))
    ActionOverride("trevil03",StartDialogNoSet(Player1))
END

IF
  Global("cefald04Spawn","AR1901",0)
  Global("GrovePoisoned","GLOBAL",1)
THEN
    SetGlobal("cefald04Spawn","AR1901",1)
END

IF
  Global("trevil01Job","GLOBAL",0)
  Global("deactivatethesource","AR1901",0)
THEN
    SetGlobal("deactivatethesource","AR1901",1)
    TriggerActivation("THESOURCE",FALSE)
END

IF
  Global("GrovePoisoned","GLOBAL",0)
  Global("NonEvilPath","AR1901",0)
THEN
    SetGlobal("NonEvilPath","AR1901",1)
    ActionOverride("trevil02",DestroySelf())
    TriggerActivation("THESOURCE",FALSE)
END
