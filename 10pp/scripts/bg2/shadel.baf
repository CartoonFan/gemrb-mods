IF
  Killed([ANYONE])
THEN
  RESPONSE #100
    SetInterrupt(FALSE)
    ReallyForceSpell(LastTrigger,MAKE_SHADOW)
    SetInterrupt(TRUE)
END

IF
  Delay(12)
  See(NearestEnemyOf(Myself))
THEN
  RESPONSE #100
    ReallyForceSpell(NearestEnemyOf(Myself),SHADOW_DRAIN)
END

IF
  Global("pwstun","LOCALS",0)
  See(NearestEnemyOf(Myself))
  !Name("Mazzy",NearestEnemyOf(Myself))
THEN
  RESPONSE #100
    SetGlobal("pwstun","LOCALS",1)
    SpellNoDec(NearestEnemyOf(Myself),WIZARD_SYMBOL_STUN)
END

IF
  Global("spellstrike","LOCALS",0)
  OR(2)
    See(NearestEnemyOfType([0.0.0.MAGE_ALL]))
    See(NearestEnemyOfType([0.0.0.CLERIC_ALL]))
THEN
  RESPONSE #100
    ReallyForceSpell(LastSeenBy(Myself),WIZARD_SPELL_STRIKE)
    SetGlobal("spellstrike","LOCALS",1)
END

IF
  Global("silence","LOCALS",0)
  OR(2)
    See(NearestEnemyOfType([0.0.0.MAGE_ALL]))
    See(NearestEnemyOfType([0.0.0.CLERIC_ALL]))
  !Range(LastSeenBy(Myself),15)
THEN
  RESPONSE #100
    SetGlobal("silence","LOCALS",1)
    SpellNoDec(LastSeenBy(Myself),CLERIC_SILENCE_15_FOOT)
END

IF
  See(NearestEnemyOf(Myself))
  CheckStatLT(Myself,1,STONESKINS)
  HitBy([ANYONE],CRUSHING)
  HPPercentLT(Myself,25)
  !Dead("yself)")  // yself)
  Global("Prep2","LOCALS",0)
THEN
  RESPONSE #100
    DisplayString(Myself,40199)  // ~Chain Contingency - Mirror Image~
    ApplySpell(Myself,WIZARD_MIRROR_IMAGE)
    DisplayString(Myself,3302)  // ~Chain Contingency - Spell Turning~
    ApplySpell(Myself,WIZARD_SPELL_TURNING)
    DisplayString(Myself,40240)  // ~Chain Contingency - Mislead~
    ApplySpell(Myself,NPC_BLADE_BARRIER)
    SetGlobal("Prep2","LOCALS",1)
END

IF
  See(NearestEnemyOf(Myself))
  Global("finger","LOCALS",0)
THEN
  RESPONSE #100
    SpellNoDec(NearestEnemyOf(Myself),WIZARD_CHROMATIC_ORB)
    SetGlobal("finger","LOCALS",1)
END

IF
  See(NearestEnemyOf(Myself))
  !HasBounceEffects(LastSeenBy(Myself))
  Global("finger","LOCALS",1)
THEN
  RESPONSE #100
    SpellNoDec(NearestEnemyOf(Myself),WIZARD_FINGER_OF_DEATH)
    SetGlobal("finger","LOCALS",2)
END

