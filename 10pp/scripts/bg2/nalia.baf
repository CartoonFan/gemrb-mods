IF
  OR(2)
    Heard("kpcapt01",99)  // ~Captain Arat~
    Heard("kpsold02",99)  // ~de'Arnise Guard~
  Allegiance(Myself,NEUTRAL)
  !InParty(Myself)
THEN
  RESPONSE #100
    Enemy()
END

IF
  OR(2)
    Heard("kpcapt01",99)  // ~Captain Arat~
    Heard("kpsold02",99)  // ~de'Arnise Guard~
  InParty(Myself)
THEN
  RESPONSE #100
    LeaveParty()
    Enemy()
END

IF
  Allegiance(Myself,NEUTRAL)
  !InParty(Myself)
  See([ENEMY])
  !Class(LastSeenBy(Myself),INNOCENT)
  !Class(LastSeenBy(Myself),FLAMING_FIST)
THEN
  RESPONSE #100
    AttackReevaluate([ENEMY],30)
END

IF
  See([PC])
  !InParty(Myself)
  Global("NaliaMove","GLOBAL",1)
  CombatCounter(0)
  Global("NaliaInitKeepOnce","GLOBAL",0)
  Global("NaliaKeepPlot","GLOBAL",0)
THEN
  RESPONSE #100
    StartDialogNoSet([PC])
    SetGlobal("NaliaInitKeepOnce","GLOBAL",1)
END

IF
  See([PC])
  NumberOfTimesTalkedTo(0)
  Global("NaliaTalkedTo","LOCALS",0)
  CombatCounter(0)
THEN
  RESPONSE #100
    Dialog([PC])
END

IF
  Global("NaliaTorgalDies","GLOBAL",0)
  InParty(Myself)
  Dead("Torgal")  // ~TorGal~
  CombatCounter(0)
  Global("TorgalDies","LOCALS",0)
  Global("NaliaKeepPlot","GLOBAL",0)
THEN
  RESPONSE #100
    StartDialogNoSet(Player1)
END

IF
  InParty(Myself)
  Dead("Torgal")  // ~TorGal~
  Global("NaliaKeepPlot","GLOBAL",0)
  !Global("Chapter","GLOBAL",4)
  !Global("Chapter","GLOBAL",5)
  !Global("Chapter","GLOBAL",7)
  AreaType(OUTDOOR)
  AreaCheck("AR1300")
  CombatCounter(0)
  Global("NaliaRaised","GLOBAL",0)
THEN
  RESPONSE #100
    SetGlobalTimer("NaliaMessenger","GLOBAL",SEVEN_DAYS)
    StartDialogNoSet(Player1)
END

IF
  InParty(Myself)
  !Dead("Torgal")  // ~TorGal~
  GlobalTimerExpired("ArrivedNaliaKeep","GLOBAL")
  See([PC])
  Global("EnteredAR1300","GLOBAL",0)
  !Global("Chapter","GLOBAL",4)
  !Global("Chapter","GLOBAL",5)
  !Global("Chapter","GLOBAL",7)
  AreaType(OUTDOOR)
  OR(2)
    Global("Complain","LOCALS",0)
    Global("Complain","LOCALS",2)
  CombatCounter(0)
THEN
  RESPONSE #100
    IncrementGlobal("Complain","LOCALS",1)
    StartDialogNoSet([PC])
END

IF
  InParty(Myself)
  !Dead("Torgal")  // ~TorGal~
  !Global("Chapter","GLOBAL",4)
  !Global("Chapter","GLOBAL",5)
  !Global("Chapter","GLOBAL",7)
  AreaType(OUTDOOR)
  GlobalTimerExpired("ArrivedNaliaKeep","GLOBAL")
  Global("EnteredAR1300","GLOBAL",1)
  GlobalLT("Complain","LOCALS",6)
  CombatCounter(0)
THEN
  RESPONSE #100
    SetGlobal("Complain","LOCALS",5)
    StartDialogNoSet(Player1)
END

IF
  See([PC])
  InParty(Myself)
  AreaCheck("AR1300")
  Global("EnteredAR1300","GLOBAL",0)
  Global("NaliaKeepPlot","GLOBAL",0)
THEN
  RESPONSE #100
    StartDialogNoSet(Player1)
END

IF
  See([PC])
  InParty(Myself)
  Global("DelciaLeave","GLOBAL",1)
  Global("NaliaKeepPlot","GLOBAL",0)
THEN
  RESPONSE #100
    Wait(2)
    StartDialogNoSet(Player1)
END

IF
  See([PC])
  InParty(Myself)
  AreaCheck("AR1302")
  CombatCounter(0)
  Global("NaliaInAR1302","AR1302",0)
  Global("NaliaAR1302","LOCALS",0)
THEN
  RESPONSE #100
    StartDialogNoSet([PC])
END

IF
  See([PC])
  InParty(Myself)
  CombatCounter(0)
  AreaCheck("AR1303")
  Global("NaliaInAR1303","AR1303",0)
  Global("NaliaAR1303","LOCALS",0)
THEN
  RESPONSE #100
    StartDialogNoSet([PC])
END

IF
  InParty(Myself)
  AreaCheck("AR1304")
  GlobalGT("KPRevolt","GLOBAL",9)
THEN
  RESPONSE #100
    Wait(1)
    StartDialogNoSet(Player1)
END

IF
  InParty(Myself)
  GlobalTimerExpired("NaliaMessenger","GLOBAL")
  Global("NaliaMessage","GLOBAL",0)
  !Exists("NALIAMES")  // ~Messenger~
  !Global("Chapter","GLOBAL",4)
  !Global("Chapter","GLOBAL",5)
  !Global("Chapter","GLOBAL",7)
  AreaType(CITY)
  CombatCounter(0)
  !AreaCheck("AR2000")
THEN
  RESPONSE #100
    CreateCreatureObjectOffScreen("NALIAMES",Myself,0,0,0)  // ~Messenger~
END

IF
  InParty(Myself)
  Global("NaliaMessage","GLOBAL",1)
  Global("IsaeaNalia","GLOBAL",0)
  Global("NaliaWentToFuneral","GLOBAL",0)
  !Exists("NALIAMES")  // ~Messenger~
  CombatCounter(0)
  !Global("Deactivate0801","AR0800",2)
  AreaCheck("AR0800")
THEN
  RESPONSE #100
    CreateCreatureObject("NALIAMES",Myself,0,0,0)  // ~Messenger~
    ActionOverride("naliames",StartDialogNoSet(Player1))
END

IF
  GlobalTimerExpired("NaliaGraveyardTimer","GLOBAL")
  InParty(Myself)
  See([PC])
  !StateCheck([PC],STATE_SLEEPING)
  CombatCounter(0)
  !Global("Chapter","GLOBAL",4)
  !Global("Chapter","GLOBAL",5)
  !Global("Chapter","GLOBAL",7)
  !AreaCheck("AR0800")
  Global("NaliaWentToFuneral","GLOBAL",0)
  !Global("IsaeaNalia","GLOBAL",1)
  GlobalLT("NaliaGraveComplain","GLOBAL",2)
THEN
  RESPONSE #100
    StartDialogNoSet([PC])
END

IF
  Global("IsaeaNalia","GLOBAL",1)
  Global("NaliaComplainsIsaea","LOCALS",0)
  GlobalTimerExpired("FuneralLeaveTimer","GLOBAL")
  CombatCounter(0)
  See([PC])
  InParty(Myself)
  !StateCheck([PC],STATE_SLEEPING)
THEN
  RESPONSE #100
    StartDialogNoSet([PC])
END

IF
  InParty(Myself)
  GlobalTimerExpired("IsaeaArrestTimer","GLOBAL")
  Global("NaliaJamie","GLOBAL",0)
  !Dead("ISAEA")  // ~Isaea Roenal~
  !Exists("ISAEA")  // ~Isaea Roenal~
  !Global("Chapter","GLOBAL",4)
  !Global("Chapter","GLOBAL",5)
  !Global("Chapter","GLOBAL",7)
  AreaType(OUTDOOR)
  CombatCounter(0)
THEN
  RESPONSE #100
    CreateCreatureObjectOffScreen("ISAEA",Myself,0,0,0)  // ~Isaea Roenal~
    CreateCreatureObjectOffScreen("ISAMNG1",Myself,0,0,0)  // ~Amnish Soldier~
    CreateCreatureObjectOffScreen("ISAMNG2",Myself,0,0,0)  // ~Amnish Soldier~
    CreateCreatureObjectOffScreen("ISAMNG3",Myself,0,0,0)  // ~Amnish Soldier~
    CreateCreatureObjectOffScreen("ISAMNG4",Myself,0,0,0)  // ~Amnish Soldier~
    SetGlobal("NaliaJamie","GLOBAL",1)
END

IF
  InParty(Myself)
  InParty("Aerie")  // ~Aerie~
  See("Aerie")  // ~Aerie~
  !Dead("Aerie")  // ~Aerie~
  !StateCheck("Aerie",STATE_SLEEPING)  // ~Aerie~
  HPPercentLT("Aerie",25)  // ~Aerie~
  !HP("Aerie",1)  // ~Aerie~
  CombatCounter(0)
  Global("BNalia4","LOCALS",0)
THEN
  RESPONSE #100
    Interact("Aerie")
END

IF
  InParty(Myself)
  InParty("Edwin")  // Edwin
  See("Edwin")  // Edwin
  !Dead("Edwin")  // Edwin
  !StateCheck("Edwin",STATE_SLEEPING)  // Edwin
  Gender("Edwin",FEMALE)  // Edwin
  AreaType(CITY)
  AreaType(0)
  CombatCounter(0)
  Global("BNalia6","LOCALS",0)
THEN
  RESPONSE #100
    Interact("Edwin")
END

IF
  InParty(Myself)
  InParty("Keldorn")  // Keldorn
  See("Keldorn")  // Keldorn
  !Dead("Keldorn")  // Keldorn
  !StateCheck("Keldorn",STATE_SLEEPING)  // Keldorn
  AreaCheck("AR0903")
  CombatCounter(0)
  Global("BNalia7","LOCALS",0)
THEN
  RESPONSE #100
    Interact("Keldorn")
END

IF
  InParty(Myself)
  Global("TannerWarning2","AR0502",0)
THEN
  RESPONSE #100
    SetGlobal("TannerWarning2","AR0502",1)
    StartDialogNoSet(Player1)
END

IF
  PartyHasItem("misc5m")  // ~Inspector's Body~
  InParty(Myself)
  See(Player1)
  !StateCheck(Player1,STATE_SLEEPING)
  OR(3)
    !InParty("Keldorn")  // Keldorn
    Dead("Keldorn")  // Keldorn
    StateCheck("Keldorn",STATE_SLEEPING)  // Keldorn
  OR(3)
    !InParty("Anomen")  // Anomen
    Dead("Anomen")  // Anomen
    StateCheck("Anomen",STATE_SLEEPING)  // Anomen
  OR(3)
    !InParty("Yoshimo")  // Yoshimo
    Dead("Yoshimo")  // Yoshimo
    StateCheck("Yoshimo",STATE_SLEEPING)  // Yoshimo
  Global("FoundAegis","GLOBAL",0)
  Global("FoundAegis2","LOCALS",0)
THEN
  RESPONSE #100
    SetGlobal("FoundAegis2","LOCALS",1)
    StartDialogNoSet(Player1)
END

IF
  Allegiance(Myself,ENEMY)
  !InParty(Myself)
  Global("NPCFight","LOCALS",0)
THEN
  RESPONSE #100
    SetGlobal("NPCFight","LOCALS",1)
    ChangeAIScript("",DEFAULT)
    ChangeAIScript("useitem",GENERAL)
    ChangeAIScript("edwinx",SPECIFICS)
    SetDialogue("")
    Continue()
END

IF
  Allegiance(Myself,NEUTRAL)
  AttackedBy([GOODCUTOFF],DEFAULT)
THEN
  RESPONSE #100
    ChangeAIScript("useitem",GENERAL)
    ChangeAIScript("edwinx",SPECIFICS)
    Enemy()
    Continue()
END

IF
  !Allegiance(Myself,ENEMY)
  !InParty(Myself)
  Global("NPCFight","LOCALS",1)
THEN
  RESPONSE #100
    SetGlobal("NPCFight","LOCALS",0)
    ChangeAIScript("",GENERAL)
    ChangeAIScript("",SPECIFICS)
    Continue()
END

