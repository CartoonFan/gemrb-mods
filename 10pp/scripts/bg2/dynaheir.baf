IF
  !UnselectableVariable(0)
  Global("Edwinfight","GLOBAL",0)
THEN
  RESPONSE #100
    MakeUnselectable(0)
END

IF
  UnselectableVariable(0)
  See("Edwin")  // Edwin
  Global("Edwinfight","GLOBAL",1)
THEN
  RESPONSE #100
    MakeUnselectable(5000)
END

IF
  !UnselectableVariable(0)
  Dead("Edwin")  // Edwin
  Global("Edwinfight","GLOBAL",1)
THEN
  RESPONSE #100
    SetGlobal("Edwinfight","GLOBAL",0)
    MakeUnselectable(0)
END

IF
  !UnselectableVariable(0)
  !See("Edwin")  // Edwin
THEN
  RESPONSE #100
    MakeUnselectable(0)
END

IF
  Global("Edwinfight","GLOBAL",1)
  See("Edwin")  // Edwin
  HaveSpell(WIZARD_MIRROR_IMAGE)
THEN
  RESPONSE #100
    Spell(Myself,WIZARD_MIRROR_IMAGE)
END

IF
  Global("Edwinfight","GLOBAL",1)
  See("Edwin")  // Edwin
  HaveSpell(WIZARD_ARMOR)
THEN
  RESPONSE #100
    Spell(Myself,WIZARD_ARMOR)
END

IF
  Global("Edwinfight","GLOBAL",1)
  See("Edwin")  // Edwin
  HaveSpell(WIZARD_MAGIC_MISSILE)
THEN
  RESPONSE #100
    Spell("Edwin",WIZARD_MAGIC_MISSILE)
END

IF
  Global("Edwinfight","GLOBAL",1)
  See("Edwin")  // Edwin
  HaveSpell(WIZARD_LARLOCH_MINOR_DRAIN)
THEN
  RESPONSE #100
    Spell("Edwin",WIZARD_LARLOCH_MINOR_DRAIN)
END

IF
  Global("Edwinfight","GLOBAL",1)
  See("Edwin")  // Edwin
  HaveSpell(WIZARD_LIGHTNING_BOLT)
THEN
  RESPONSE #100
    Spell("Edwin",WIZARD_LIGHTNING_BOLT)
END

IF
  Global("Edwinfight","GLOBAL",1)
  See("Edwin")  // Edwin
  HaveSpell(WIZARD_MELF_ACID_ARROW)
THEN
  RESPONSE #100
    Spell("Edwin",WIZARD_MELF_ACID_ARROW)
END

IF
  Global("Edwinfight","GLOBAL",1)
  See("Edwin")  // Edwin
  HaveSpell(WIZARD_LARLOCH_MINOR_DRAIN)
THEN
  RESPONSE #100
    Spell("Edwin",WIZARD_FLAME_ARROW)
END

IF
  Global("Edwinfight","GLOBAL",1)
  See("Edwin")  // Edwin
THEN
  RESPONSE #100
    Attack("Edwin")
END

IF
  Global("Edwinfight2","GLOBAL",1)
  See("Edwin")  // Edwin
  !Dead("Edwin")  // Edwin
THEN
  RESPONSE #100
    DialogueInterrupt(FALSE)
    Attack("Edwin")
END

IF
  Global("Edwinfight2","GLOBAL",1)
  Dead("Edwin")  // Edwin
THEN
  RESPONSE #100
    DialogueInterrupt(TRUE)
    SetGlobal("Edwinfight2","GLOBAL",0)
END

IF
  Die()
  InParty("Edwin")  // Edwin
THEN
  RESPONSE #100
    ActionOverride("Edwin",Dialog([PC]))
END

