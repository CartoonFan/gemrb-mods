IF
  Allegiance(Myself,ENEMY)
  See(NearestEnemyOf(Myself))
  !GlobalTimerNotExpired("ChainContingency1","LOCALS")
THEN
  RESPONSE #100
    SetGlobalTimer("ChainContingency1","LOCALS",1000)
    SetGlobalTimer("StartTrigger","LOCALS",12)
    DisplayString(Myself,73139)  // ~Contingency - Fired~
    ReallyForceSpell(Myself,WIZARD_IMPROVED_MANTLE)
    ReallyForceSpell(Myself,WIZARD_SPHERE_OF_CHAOS)
    ReallyForceSpell(Myself,WIZARD_SIMULACRUM)
END

IF
  Allegiance(Myself,ENEMY)
  See(NearestEnemyOf(Myself))
  !GlobalTimerNotExpired("SpellTrigger1","LOCALS")
  OR(2)
    GlobalTimerExpired("StartTrigger","LOCALS")
    HPPercentLT(Myself,50)
THEN
  RESPONSE #100
    SetGlobalTimer("SpellTrigger1","LOCALS",1000)
    SetGlobalTimer("ProtDown","LOCALS",12)
    DisplayString(Myself,39968)  // ~Spell Trigger - Fired~
    ReallyForceSpell(Myself,WIZARD_PROTECTION_FROM_MAGIC_WEAPONS)
    ReallyForceSpell(Myself,WIZARD_GLOBE_OF_INVULNERABILITY)
    ReallyForceSpell(Myself,WIZARD_SHADOW_DOOR)
END

IF
  Allegiance(Myself,ENEMY)
  See(NearestEnemyOf(Myself))
  Range(LastSeenBy(Myself),15)
  AttackedBy([GOODCUTOFF],DEFAULT)
  HPPercentLT(Myself,100)
  !GlobalTimerNotExpired("SpellSequencer1","LOCALS")
THEN
  RESPONSE #100
    SetGlobalTimer("SpellSequencer1","LOCALS",1000)
    DisplayString(Myself,39969)  // ~Spell Sequencer - Fired~
    ReallyForceSpell(NearestEnemyOf(Myself),WIZARD_GREATER_MALISON)
    ReallyForceSpell(Myself,WIZARD_STONE_SKIN)
    ReallyForceSpell(NearestEnemyOf(Myself),WIZARD_CONFUSION)
END

IF
  See([PC])
  Allegiance(Myself,ENEMY)
  !StateCheck(Myself,STATE_INVISIBLE)
  !StateCheck(Myself,STATE_IMPROVEDINVISIBILITY)
  !GlobalTimerNotExpired("Contingency1","LOCALS")
  RandomNum(2,1)
THEN
  RESPONSE #100
    SetGlobalTimer("Contingency1","LOCALS",1000)
    FaceObject(LastSeenBy(Myself))
    DisplayString(Myself,73139)  // ~Contingency - Fired~
    ReallyForceSpell(Myself,WIZARD_SHADOW_DOOR)
END

IF
  Allegiance(Myself,ENEMY)
  See(NearestEnemyOf(Myself))
  Range(LastSeenBy(Myself),4)
  RandomNum(2,1)
  !GlobalTimerNotExpired("MinorSequencer1","LOCALS")
  !StateCheck(Myself,STATE_MIRRORIMAGE)
  !StateCheck(Myself,STATE_BLUR)
THEN
  RESPONSE #100
    SetGlobalTimer("MinorSequencer1","LOCALS",1000)
    FaceObject(LastSeenBy(Myself))
    DisplayString(Myself,8635)  // ~Minor Sequencer Activated~
    ReallyForceSpell(Myself,WIZARD_MIRROR_IMAGE)
    ReallyForceSpell(Myself,WIZARD_BLUR)
END

IF
  HPPercentLT(Myself,50)
  !GlobalTimerNotExpired("DrankPotionTimer","LOCALS")
  HasItem("POTN55",Myself)  // ~Potion of Superior Healing~
THEN
  RESPONSE #100
    SetGlobalTimer("DrankPotionTimer","LOCALS",6)
    DisplayStringHead(Myself,46150)  // ~quaffs a potion~
    UseItem("POTN55",Myself)  // ~Potion of Superior Healing~
END

IF
  Global("TimeToTeleport","LOCALS",1)
THEN
  RESPONSE #100
    SetGlobal("TimeToTeleport","LOCALS",0)
END

IF
  Global("TimeToTeleport","LOCALS",0)
  GlobalLT("TeleportLimit","LOCALS",20)
  Allegiance(Myself,ENEMY)
  HPPercentLT(Myself,40)
  !Dead("yself)")  // yself)
  Range(NearestEnemyOf(Myself),8)
  !GlobalTimerNotExpired("LichTel","LOCALS")
THEN
  RESPONSE #100
    SetGlobal("TimeToTeleport","LOCALS",1)
    IncrementGlobal("TeleportLimit","LOCALS",20)
    Continue()
END

IF
  Global("TimeToTeleport","LOCALS",0)
  GlobalLT("TeleportLimit","LOCALS",20)
  AttackedBy([GOODCUTOFF],DEFAULT)
  RandomNum(2,1)
  Allegiance(Myself,ENEMY)
  Range(NearestEnemyOf(Myself),4)
  Range(SecondNearestEnemyOf(Myself),6)
  Range(ThirdNearestEnemyOf(Myself),8)
  !GlobalTimerNotExpired("LichTel","LOCALS")
THEN
  RESPONSE #100
    SetGlobal("TimeToTeleport","LOCALS",1)
    IncrementGlobal("TeleportLimit","LOCALS",20)
    Continue()
END

IF
  Global("TimeToTeleport","LOCALS",0)
  GlobalLT("TeleportLimit","LOCALS",20)
  Allegiance(Myself,ENEMY)
  RandomNum(4,1)
  Range(NearestEnemyOf(Myself),10)
  !GlobalTimerNotExpired("LichTel","LOCALS")
THEN
  RESPONSE #100
    SetGlobal("TimeToTeleport","LOCALS",1)
    IncrementGlobal("TeleportLimit","LOCALS",20)
    Continue()
END

IF
  Global("TimeToTeleport","LOCALS",1)
  Global("LichTelTrack","LOCALS",0)
THEN
  RESPONSE #100
    SetGlobal("LichTelTrack","LOCALS",1)
    SetGlobal("TimeToTeleport","LOCALS",0)
    SetGlobalTimer("LichTel","LOCALS",10)
    DisplayString(Myself,14117)  // ~Teleport~
    ReallyForceSpellPointRES("lichtel",[808.420])
  RESPONSE #100
    SetGlobal("LichTelTrack","LOCALS",2)
    SetGlobal("TimeToTeleport","LOCALS",0)
    SetGlobalTimer("LichTel","LOCALS",10)
    DisplayString(Myself,14117)  // ~Teleport~
    ReallyForceSpellPointRES("lichtel",[1009.649])
  RESPONSE #100
    SetGlobal("LichTelTrack","LOCALS",3)
    SetGlobal("TimeToTeleport","LOCALS",0)
    SetGlobalTimer("LichTel","LOCALS",10)
    DisplayString(Myself,14117)  // ~Teleport~
    ReallyForceSpellPointRES("lichtel",[459.642])
  RESPONSE #100
    SetGlobal("LichTelTrack","LOCALS",4)
    SetGlobal("TimeToTeleport","LOCALS",0)
    SetGlobalTimer("LichTel","LOCALS",10)
    DisplayString(Myself,14117)  // ~Teleport~
    ReallyForceSpellPointRES("lichtel",[721.840])
END

IF
  Global("TimeToTeleport","LOCALS",1)
  Global("LichTelTrack","LOCALS",1)
THEN
  RESPONSE #100
    SetGlobal("LichTelTrack","LOCALS",2)
    SetGlobal("TimeToTeleport","LOCALS",0)
    SetGlobalTimer("LichTel","LOCALS",10)
    DisplayString(Myself,14117)  // ~Teleport~
    ReallyForceSpellPointRES("lichtel",[1009.649])
  RESPONSE #100
    SetGlobal("LichTelTrack","LOCALS",10)
    SetGlobal("TimeToTeleport","LOCALS",0)
    SetGlobalTimer("LichTel","LOCALS",10)
    DisplayString(Myself,14117)  // ~Teleport~
    ReallyForceSpellPointRES("lichtel",[459.642])
  RESPONSE #100
    SetGlobal("LichTelTrack","LOCALS",4)
    SetGlobal("TimeToTeleport","LOCALS",0)
    SetGlobalTimer("LichTel","LOCALS",10)
    DisplayString(Myself,14117)  // ~Teleport~
    ReallyForceSpellPointRES("lichtel",[721.840])
END

IF
  Global("TimeToTeleport","LOCALS",1)
  Global("LichTelTrack","LOCALS",2)
THEN
  RESPONSE #100
    SetGlobal("LichTelTrack","LOCALS",1)
    SetGlobal("TimeToTeleport","LOCALS",0)
    SetGlobalTimer("LichTel","LOCALS",10)
    DisplayString(Myself,14117)  // ~Teleport~
    ReallyForceSpellPointRES("lichtel",[808.420])
  RESPONSE #100
    SetGlobal("LichTelTrack","LOCALS",3)
    SetGlobal("TimeToTeleport","LOCALS",0)
    SetGlobalTimer("LichTel","LOCALS",10)
    DisplayString(Myself,14117)  // ~Teleport~
    ReallyForceSpellPointRES("lichtel",[459.642])
  RESPONSE #100
    SetGlobal("LichTelTrack","LOCALS",4)
    SetGlobal("TimeToTeleport","LOCALS",0)
    SetGlobalTimer("LichTel","LOCALS",10)
    DisplayString(Myself,14117)  // ~Teleport~
    ReallyForceSpellPointRES("lichtel",[721.840])
END

IF
  Global("TimeToTeleport","LOCALS",1)
  Global("LichTelTrack","LOCALS",3)
THEN
  RESPONSE #100
    SetGlobal("LichTelTrack","LOCALS",1)
    SetGlobal("TimeToTeleport","LOCALS",0)
    SetGlobalTimer("LichTel","LOCALS",10)
    DisplayString(Myself,14117)  // ~Teleport~
    ReallyForceSpellPointRES("lichtel",[808.420])
  RESPONSE #100
    SetGlobal("LichTelTrack","LOCALS",2)
    SetGlobal("TimeToTeleport","LOCALS",0)
    SetGlobalTimer("LichTel","LOCALS",10)
    DisplayString(Myself,14117)  // ~Teleport~
    ReallyForceSpellPointRES("lichtel",[1009.649])
  RESPONSE #100
    SetGlobal("LichTelTrack","LOCALS",4)
    SetGlobal("TimeToTeleport","LOCALS",0)
    SetGlobalTimer("LichTel","LOCALS",10)
    DisplayString(Myself,14117)  // ~Teleport~
    ReallyForceSpellPointRES("lichtel",[721.840])
END

IF
  Global("TimeToTeleport","LOCALS",1)
  Global("LichTelTrack","LOCALS",4)
THEN
  RESPONSE #100
    SetGlobal("LichTelTrack","LOCALS",1)
    SetGlobal("TimeToTeleport","LOCALS",0)
    SetGlobalTimer("LichTel","LOCALS",10)
    DisplayString(Myself,14117)  // ~Teleport~
    ReallyForceSpellPointRES("lichtel",[808.420])
  RESPONSE #100
    SetGlobal("LichTelTrack","LOCALS",2)
    SetGlobal("TimeToTeleport","LOCALS",0)
    SetGlobalTimer("LichTel","LOCALS",10)
    DisplayString(Myself,14117)  // ~Teleport~
    ReallyForceSpellPointRES("lichtel",[1009.649])
  RESPONSE #100
    SetGlobal("LichTelTrack","LOCALS",3)
    SetGlobal("TimeToTeleport","LOCALS",0)
    SetGlobalTimer("LichTel","LOCALS",10)
    DisplayString(Myself,14117)  // ~Teleport~
    ReallyForceSpellPointRES("lichtel",[459.642])
END

IF
  StateCheck(Myself,STATE_SILENCED)
THEN
  RESPONSE #100
    SpellNoDec(Myself,WIZARD_VOCALIZE)
END

IF
  Allegiance(Myself,ENEMY)
  OR(6)
    StateCheck(NearestEnemyOf(Myself),STATE_INVISIBLE)
    StateCheck(NearestEnemyOf(Myself),STATE_IMPROVEDINVISIBILITY)
    StateCheck(SecondNearestEnemyOf(Myself),STATE_INVISIBLE)
    StateCheck(SecondNearestEnemyOf(Myself),STATE_IMPROVEDINVISIBILITY)
    StateCheck(ThirdNearestEnemyOf(Myself),STATE_INVISIBLE)
    StateCheck(ThirdNearestEnemyOf(Myself),STATE_IMPROVEDINVISIBILITY)
  !GlobalTimerNotExpired("LichSight","LOCALS")
THEN
  RESPONSE #100
    SetGlobalTimer("LichSight","LOCALS",60)
    ForceSpell(Myself,WIZARD_TRUE_SIGHT)
END

IF
  Allegiance(Myself,ENEMY)
  !StateCheck(Myself,STATE_INVISIBLE)
  !StateCheck(Myself,STATE_IMPROVEDINVISIBILITY)
  RandomNum(3,1)
  Range(NearestEnemyOf(Myself),8)
  !GlobalTimerNotExpired("LichShadowDoor","LOCALS")
THEN
  RESPONSE #100
    SetGlobalTimer("LichShadowDoor","LOCALS",30)
    ForceSpell(Myself,WIZARD_SHADOW_DOOR)
END

IF
  CheckStat(Myself,0,STONESKINS)
  RandomNum(2,1)
  !GlobalTimerNotExpired("LichStoneSkin","LOCALS")
THEN
  RESPONSE #100
    SetGlobalTimer("LichStoneSkin","LOCALS",10)
    ForceSpell(Myself,0)
END

IF
  AttackedBy([GOODCUTOFF],MELEE)
  HPPercentLT(Myself,75)
  GlobalTimerExpired("ProtDown","LOCALS")
  RandomNum(2,1)
  !GlobalTimerNotExpired("LichMantle","LOCALS")
THEN
  RESPONSE #100
    SetGlobalTimer("LichMantle","LOCALS",24)
    ForceSpell(Myself,WIZARD_MANTLE)
  RESPONSE #100
    SetGlobalTimer("LichMantle","LOCALS",24)
    ForceSpell(Myself,WIZARD_IMPROVED_MANTLE)
END

IF
  !Allegiance(Myself,ENEMY)
THEN
  RESPONSE #100
    NoAction()
END

IF
  See(NearestEnemyOf(Myself))
THEN
  RESPONSE #100
    Continue()
END

IF
  OR(3)
    See(SecondNearestEnemyOfType([GOODCUTOFF.0.0.BARD]))
    See(SecondNearestEnemyOfType([GOODCUTOFF.0.0.DRUID_ALL]))
    See(SecondNearestEnemyOfType([GOODCUTOFF.0.0.CLERIC_ALL]))
  !StateCheck(LastSeenBy(Myself),STATE_HELPLESS)
  !StateCheck(LastSeenBy(Myself),STATE_STUNNED)
  !StateCheck(LastSeenBy(Myself),STATE_PANIC)
  !StateCheck(LastSeenBy(Myself),STATE_SILENCED)
THEN
  RESPONSE #100
    Continue()
END

IF
  OR(3)
    See(NearestEnemyOfType([GOODCUTOFF.0.0.BARD]))
    See(NearestEnemyOfType([GOODCUTOFF.0.0.DRUID_ALL]))
    See(NearestEnemyOfType([GOODCUTOFF.0.0.CLERIC_ALL]))
  !StateCheck(LastSeenBy(Myself),STATE_HELPLESS)
  !StateCheck(LastSeenBy(Myself),STATE_STUNNED)
  !StateCheck(LastSeenBy(Myself),STATE_PANIC)
  !StateCheck(LastSeenBy(Myself),STATE_SILENCED)
THEN
  RESPONSE #100
    Continue()
END

IF
  OR(2)
    See(ThirdNearestEnemyOfType([GOODCUTOFF.0.0.MAGE_ALL]))
    See(ThirdNearestEnemyOfType([GOODCUTOFF.0.0.SORCERER]))
  !StateCheck(LastSeenBy(Myself),STATE_HELPLESS)
  !StateCheck(LastSeenBy(Myself),STATE_STUNNED)
  !StateCheck(LastSeenBy(Myself),STATE_PANIC)
  !StateCheck(LastSeenBy(Myself),STATE_SILENCED)
THEN
  RESPONSE #100
    Continue()
END

IF
  OR(2)
    See(SecondNearestEnemyOfType([GOODCUTOFF.0.0.MAGE_ALL]))
    See(SecondNearestEnemyOfType([GOODCUTOFF.0.0.SORCERER]))
  !StateCheck(LastSeenBy(Myself),STATE_HELPLESS)
  !StateCheck(LastSeenBy(Myself),STATE_STUNNED)
  !StateCheck(LastSeenBy(Myself),STATE_PANIC)
  !StateCheck(LastSeenBy(Myself),STATE_SILENCED)
THEN
  RESPONSE #100
    Continue()
END

IF
  OR(2)
    See(NearestEnemyOfType([GOODCUTOFF.0.0.MAGE_ALL]))
    See(NearestEnemyOfType([GOODCUTOFF.0.0.SORCERER]))
  !StateCheck(LastSeenBy(Myself),STATE_HELPLESS)
  !StateCheck(LastSeenBy(Myself),STATE_STUNNED)
  !StateCheck(LastSeenBy(Myself),STATE_PANIC)
  !StateCheck(LastSeenBy(Myself),STATE_SILENCED)
THEN
  RESPONSE #100
    Continue()
END

IF
  AttackedBy([ANYONE],DEFAULT)
  See(LastAttackerOf(Myself))
  !StateCheck(LastSeenBy(Myself),STATE_HELPLESS)
  !StateCheck(LastSeenBy(Myself),STATE_STUNNED)
  !StateCheck(LastSeenBy(Myself),STATE_PANIC)
THEN
  RESPONSE #100
    Continue()
END

IF
  Range(NearestEnemyOf(Myself),4)
  See(NearestEnemyOf(Myself))
  !StateCheck(LastSeenBy(Myself),STATE_HELPLESS)
  !StateCheck(LastSeenBy(Myself),STATE_STUNNED)
  !StateCheck(LastSeenBy(Myself),STATE_PANIC)
THEN
  RESPONSE #100
    Continue()
END

IF
  OR(2)
    See(Player1)
    See(WorstAC(Myself))
  Range(LastSeenBy(Myself),6)
THEN
  RESPONSE #100
    Continue()
END

IF
  !Allegiance(LastSeenBy(Myself),GOODCUTOFF)
  See([GOODCUTOFF])
THEN
  RESPONSE #100
    MoveToObject([GOODCUTOFF])
END

IF
  !Allegiance(LastSeenBy(Myself),GOODCUTOFF)
  !See([GOODCUTOFF])
THEN
  RESPONSE #100
    SpellNoDec(Myself,0)
  RESPONSE #100
    SpellNoDec(Myself,WIZARD_SUMMON_NISHRUU)
  RESPONSE #100
    SpellNoDec(Myself,WIZARD_ANIMATE_DEAD)
  RESPONSE #100
    MoveToObject(Player1)
END

IF
  Gender(LastSeenBy(Myself),SUMMONED)
  RandomNum(2,1)
  !StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
  !StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
  !GlobalTimerNotExpired("LichDeathSpell","LOCALS")
THEN
  RESPONSE #100
    SetGlobalTimer("LichDeathSpell","LOCALS",30)
    ForceSpell(LastSeenBy(Myself),WIZARD_DEATH_SPELL)
END

IF
  !HasBounceEffects(LastSeenBy(Myself))
  RandomNum(4,1)
  !StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
  !StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
THEN
  RESPONSE #100
    SpellNoDec(LastSeenBy(Myself),WIZARD_SYMBOL_DEATH)
END

IF
  HaveSpell(WIZARD_DRAGONS_BREATH)
  RandomNum(3,1)
  !Range(LastSeenBy(Myself),6)
  !StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
  !StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
THEN
  RESPONSE #100
    Spell(LastSeenBy(Myself),WIZARD_DRAGONS_BREATH)
END

IF
  !StateCheck(LastSeenBy(Myself),STATE_HELPLESS)
  !HasBounceEffects(LastSeenBy(Myself))
  RandomNum(4,1)
  !StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
  !StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
THEN
  RESPONSE #100
    SpellNoDec(LastSeenBy(Myself),WIZARD_SYMBOL_STUN)
END

IF
  HaveSpell(WIZARD_ABI_DALZIMS_HORRID_WILTING)
  RandomNum(3,1)
  !Range(LastSeenBy(Myself),10)
  !StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
  !StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
THEN
  RESPONSE #100
    Spell(LastSeenBy(Myself),WIZARD_ABI_DALZIMS_HORRID_WILTING)
END

IF
  RandomNum(4,1)
  !CheckStatLT(LastSeenBy(Myself),50,RESISTMAGIC)
  !CheckStatGT(LastSeenBy(Myself),5,SAVEVSDEATH)
THEN
  RESPONSE #100
    SpellNoDec(LastSeenBy(Myself),WIZARD_FINGER_OF_DEATH)
END

IF
  RandomNum(3,1)
  HPPercentGT(LastSeenBy(Myself),35)
  !CheckStatLT(LastSeenBy(Myself),50,RESISTMAGIC)
THEN
  RESPONSE #100
    SpellNoDec(LastSeenBy(Myself),WIZARD_MAZE)
END

IF
  HaveSpell(WIZARD_PIERCE_MAGIC)
  OR(3)
    HasImmunityEffects(LastSeenBy(Myself))
    HasBounceEffects(LastSeenBy(Myself))
    CheckStatGT(LastSeenBy(Myself),0,SHIELDGLOBE)
  !HPLT(Myself,20)
  RandomNum(3,1)
  !StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
  !StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
  !Range(LastSeenBy(Myself),8)
THEN
  RESPONSE #100
    Spell(LastSeenBy(Myself),WIZARD_PIERCE_MAGIC)
END

IF
  !HPLT(Myself,20)
  RandomNum(3,1)
  !StateCheck(LastSeenBy(Myself),STATE_NORMAL)
  !StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
  !StateCheck(LastSeenBy(Myself),STATE_CONFUSED)
  !StateCheck(LastSeenBy(Myself),STATE_BLIND)
  !StateCheck(LastSeenBy(Myself),STATE_SILENCED)
  !StateCheck(LastSeenBy(Myself),STATE_STUNNED)
  !StateCheck(LastSeenBy(Myself),STATE_SLEEPING)
  OR(7)
    StateCheck(LastSeenBy(Myself),STATE_HASTED)
    StateCheck(LastSeenBy(Myself),STATE_BLESS)
    StateCheck(LastSeenBy(Myself),STATE_DRAWUPONHOLYMIGHT)
    StateCheck(LastSeenBy(Myself),STATE_BLUR)
    StateCheck(LastSeenBy(Myself),STATE_MIRRORIMAGE)
    CheckStatGT(LastSeenBy(Myself),0,0)
    CheckStatGT(LastSeenBy(Myself),0,0)
THEN
  RESPONSE #100
    ForceSpell(LastSeenBy(Myself),WIZARD_DISPEL_MAGIC)
END

IF
  RandomNum(4,1)
  !StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
  !StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
  !StateCheck(LastSeenBy(Myself),STATE_CONFUSED)
THEN
  RESPONSE #100
    SpellNoDec(LastSeenBy(Myself),WIZARD_CHAOS)
END

IF
  RandomNum(2,1)
  !HasBounceEffects(LastSeenBy(Myself))
  !StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
  !StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
THEN
  RESPONSE #100
    SpellNoDec(LastSeenBy(Myself),WIZARD_MAGIC_MISSILE)
    Continue()
  RESPONSE #100
    SpellNoDec(LastSeenBy(Myself),WIZARD_FLAME_ARROW)
    Continue()
  RESPONSE #100
    SpellNoDec(LastSeenBy(Myself),WIZARD_FIREBALL)
    Continue()
  RESPONSE #100
    SpellNoDec(LastSeenBy(Myself),WIZARD_CONE_OF_COLD)
    Continue()
  RESPONSE #100
    Continue()
END

IF
  !Range(LastSeenBy,10)
THEN
  RESPONSE #100
    RunAwayFrom(LastSeenBy(Myself),30)
  RESPONSE #100
    Continue()
END

IF
  Range(LastSeenBy,10)
  !HPPercentLT(Myself,40)
THEN
  RESPONSE #100
    AttackReevaluate(LastSeenBy(Myself),30)
  RESPONSE #100
    RunAwayFrom(NearestEnemyOf(Myself),45)
END

IF
  Range(LastSeenBy,10)
  HPPercentLT(Myself,40)
THEN
  RESPONSE #50
    AttackReevaluate(LastSeenBy(Myself),30)
  RESPONSE #100
    RunAwayFrom(NearestEnemyOf(Myself),45)
END

