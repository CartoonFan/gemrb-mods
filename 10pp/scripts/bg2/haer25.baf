IF
  Global("HaerDalisSummoned","GLOBAL",1)
THEN
  RESPONSE #100
    StartDialogNoSet([PC])
END

IF
  InParty(Myself)
  Global("HaerDalisLongShortProf","LOCALS",0)
THEN
  RESPONSE #100
    SetGlobal("HaerDalisLongShortProf","LOCALS",1)
    ApplySpellRES("HaerProf",Myself)  // <Invalid Strref -1>
END

IF
  InParty(Myself)
  Allegiance("Aerie",ENEMY)  // ~Aerie~
  !InPartyAllowDead("Aerie")  // ~Aerie~
  Global("HaerDalisRomanceActive","GLOBAL",2)
THEN
  RESPONSE #100
    LeaveParty()
    Enemy()
END

IF
  !InParty(Myself)
  Allegiance("Aerie",ENEMY)  // ~Aerie~
  !InPartyAllowDead("Aerie")  // ~Aerie~
  !Allegiance(Myself,ENEMY)
  Global("HaerDalisRomanceActive","GLOBAL",2)
THEN
  RESPONSE #100
    ChangeAIScript("Haerdax",SPECIFICS)
    Enemy()
END

IF
  Allegiance(Myself,ENEMY)
  !InParty(Myself)
  Global("NPCFight","LOCALS",0)
THEN
  RESPONSE #100
    SetGlobal("NPCFight","LOCALS",1)
    ChangeAIScript("",DEFAULT)
    ChangeAIScript("useitem",GENERAL)
    ChangeAIScript("Haerdax",SPECIFICS)
    SetDialogue("")
    Continue()
END

IF
  Allegiance(Myself,NEUTRAL)
  AttackedBy([GOODCUTOFF],DEFAULT)
THEN
  RESPONSE #100
    ChangeAIScript("useitem",GENERAL)
    ChangeAIScript("Haerdax",SPECIFICS)
    Enemy()
    Continue()
END

IF
  !Allegiance(Myself,ENEMY)
  !InParty(Myself)
  Global("NPCFight","LOCALS",1)
THEN
  RESPONSE #100
    SetGlobal("NPCFight","LOCALS",0)
    ChangeAIScript("",GENERAL)
    ChangeAIScript("",SPECIFICS)
    Continue()
END

